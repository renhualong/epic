"use strict";(self.webpackChunkepic=self.webpackChunkepic||[]).push([[893],{5893:function(e,n,r){r.r(n),r.d(n,{default:function(){return k}});var t,i,l,s,c=r(9439),d=r(2791),u=r(7250),a=r(9023),o=r(1413),h=r(168),g=r(32),x=r(9553),p=r(6776),f=r(3775),j=r(7083),m=r(6031),Z=r(184),b=m.ZP.div(t||(t=(0,h.Z)(["\nmargin-top: 30px;\nborder: 1px dashed #ccc;\npadding: 20px;\n"]))),v=m.ZP.h1(i||(i=(0,h.Z)(["\nmargin: 20px 0;\ntext-align: center;\n"]))),w=m.ZP.img(l||(l=(0,h.Z)(["\nmax-width:300px;\n"]))),F=x.Z.Dragger,S=(0,a.Pi)((function(){var e=(0,u.m)(),n=e.ImageStore,r=e.UserStore,t=(0,d.useRef)(),i=(0,d.useRef)(),l=(0,g.fv)((function(){return{width:null,setWidth:function(e){l.width=t.current.value},setHeight:function(e){l.height=i.current.value},get widthStr(){return l.width?"/w/".concat(l.width):""},height:null,get heightStr(){return l.height?"/h/".concat(l.height):""},get FullStr(){return n.serverFile.attributes.url.attributes.url+"?imageView2/0"+l.widthStr+l.heightStr}}})),s={showUploadList:!1,beforeUpload:function(e){return n.setFile(e),n.setFilename(e.name),null===r.currentUser?(f.ZP.warning("\u8bf7\u5148\u767b\u5f55\u540e\u518d\u4e0a\u4f20!!"),!1):(window.file=e,/(svg$)|(png$)|(jpg$)|(jpeg$)|(gif$)/gi.test(e.type)?e.size>1048576?(f.ZP.error("\u56fe\u7247\u6700\u59271M"),!1):(n.upload().then((function(e){console.log("\u4e0a\u4f20\u6210\u529f"),console.log(e)})).catch((function(e){console.log("\u4e0a\u4f20\u5931\u8d25"),console.log(e)})),console.log(e),!1):(f.ZP.error("\u53ea\u80fd\u4e0a\u4f20svg\u3001png\u3001jpg\u3001jpeg\u3001gif\u683c\u5f0f\u7684\u56fe\u7247"),!1))}};return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(j.Z,{tip:"\u4e0a\u4f20\u4e2d",spinning:n.isUpLoading,children:(0,Z.jsxs)(F,(0,o.Z)((0,o.Z)({},s),{},{children:[(0,Z.jsx)("p",{className:"ant-upload-drag-icon",children:(0,Z.jsx)(p.Z,{})}),(0,Z.jsx)("p",{className:"ant-upload-text",children:"\u70b9\u51fb\u6216\u8005\u62d6\u62fd\u4e0a\u4f20\u56fe\u7247"}),(0,Z.jsx)("p",{className:"ant-upload-hint",children:"\u4ec5\u652f\u6301.png/.gif/.jpg/.svg\u683c\u5f0f\u7684\u56fe\u7247,\u56fe\u7247\u6700\u5927\u5c3a\u5bf8\u4e3a1M"})]}))}),(0,Z.jsx)(Z.Fragment,{children:n.serverFile?(0,Z.jsxs)(b,{children:[(0,Z.jsx)(v,{children:"\u4e0a\u4f20\u7ed3\u679c"}),(0,Z.jsxs)("dl",{children:[(0,Z.jsx)("dt",{children:"\u7ebf\u4e0a\u5730\u5740"}),(0,Z.jsx)("dd",{children:(0,Z.jsx)("a",{target:"_blank",href:n.serverFile.attributes.url.attributes.url,children:"ImageStore.serverFile.attributes.url.attributes.url"})}),(0,Z.jsx)("dt",{children:"\u6587\u4ef6\u540d"}),(0,Z.jsx)("dd",{children:n.filename}),(0,Z.jsx)("dt",{children:"\u56fe\u7247\u9884\u89c8"}),(0,Z.jsx)("dd",{children:(0,Z.jsx)(w,{src:n.serverFile.attributes.url.attributes.url})}),(0,Z.jsx)("dt",{children:"\u66f4\u591a\u5c3a\u5bf8"}),(0,Z.jsxs)("dd",{children:[(0,Z.jsx)("input",{placeholder:"\u6700\u5927\u5bbd\u5ea6(\u53ef\u9009)",ref:t,onChange:function(){l.setWidth()}}),(0,Z.jsx)("input",{placeholder:"\u6700\u5927\u9ad8\u5ea6(\u53ef\u9009)",ref:i,onChange:function(){l.setHeight()}})]}),(0,Z.jsx)("dd",{children:(0,Z.jsx)("a",{target:"_blank",href:l.FullStr,children:l.FullStr})})]})]}):null})]})})),P=m.ZP.div(s||(s=(0,h.Z)(["\nbackground: Orange;\npadding: 10px;\nmargin: 30px 0;\ncolor: #fff;\nborder-radius: 4px;\n\n"]))),U=(0,a.Pi)((function(){(0,u.m)().UserStore;return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(P,{children:"\u8bf7\u5148\u767b\u5f55\u540e\u518d\u4e0a\u4f20!!!"})})})),k=(0,a.Pi)((function(){var e=(0,u.m)().UserStore,n=(0,d.useState)(0),r=(0,c.Z)(n,2),t=r[0];r[1];return(0,d.useEffect)((function(){return console.log("\u8fdb\u5165\u7ec4\u4ef62"),function(){console.log("\u5378\u8f7d2")}}),[t]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(Z.Fragment,{children:e.currentUser?null:(0,Z.jsx)(U,{})}),(0,Z.jsx)(S,{})]})}))}}]);
//# sourceMappingURL=893.f1645816.chunk.js.map